{% extends 'time_tracking/base.html' %}

{% block content %}
<div class="container">
    <h1>👤 Mitarbeiter erkannt</h1>
    <p class="instruction">Chip-ID: <strong>{{ chip_id }}</strong></p>
    
    <!-- Erfolgsmeldungen anzeigen -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}" style="
                padding: 15px;
                margin: 20px 0;
                border-radius: 8px;
                background: {% if message.tags == 'success' %}#10b981{% else %}#ef4444{% endif %};
                color: white;
            ">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    
    <form method="post" action="{% url 'booking' %}">
        {% csrf_token %}
        
        <div class="button-grid">
            <button type="submit" name="booking_type" value="Kommen" class="booking-btn">
                ✅ Kommen
            </button>
            <button type="submit" name="booking_type" value="Gehen" class="booking-btn">
                👋 Gehen
            </button>
            <button type="submit" name="booking_type" value="Pause Start" class="booking-btn">
                ⏸️ Pause Start
            </button>
            <button type="submit" name="booking_type" value="Pause Ende" class="booking-btn">
                ▶️ Pause Ende
            </button>
        </div>
        
        <div class="cancel">
            <a href="{% url 'scan' %}">← Abbrechen</a>
        </div>
    </form>
</div>

<script>
// Auto-Redirect nach Erfolg
{% if messages %}
    setTimeout(function() {
        window.location.href = "{% url 'scan' %}";
    }, 3000); // Nach 3 Sekunden zurück
{% endif %}
</script>
{% endblock %}
