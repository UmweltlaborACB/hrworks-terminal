{% extends 'time_tracking/base.html' %}
{% load static %}
{% block content %}

<div class="container">
    <img src="{% static 'time_tracking/images/logo.png' %}" alt="{{ company_name }}" class="logo">
    <p><h1>Zeiterfassung</h1></p>
    <p class="instruction">Bitte Chip auflegen</p>
    <div class="loading-spinner"></div>    
</div>

<script>
// Polling alle 500ms
setInterval(async function() {
    try {
        const response = await fetch('/check-chip/');
        const data = await response.json();
        
        if (data.chip_id) {
            console.log('RFID erkannt:', data.chip_id);
            window.location.href = `/booking/?chip_id=${encodeURIComponent(data.chip_id)}`;
        }
    } catch (error) {
        console.error('Fehler beim Chip-Check:', error);
    }
}, 500);
</script>
{% endblock %}
